#!/bin/bash
set -e
pinyin=$1

grep ^\"z$pinyin\" ~/system-config/gcode/ime-py/wubi86.py|
    perl -npe 's/.*?://; s/[()a-z", ]+/ /g; s/\s+/\n/g'|grep .|
    while read kanji; do

        jkanji=$(s2j $kanji)
        skanji=$(t2s $jkanji)
        if test $skanji != $jkanji -a $kanji = $jkanji; then
            echo continue for $kanji: $skanji
            continue
        fi
        if grep -q $jkanji /usr/share/gjiten/dics/kanjidic; then
            echo -n "$kanji "; grep $jkanji /usr/share/gjiten/dics/kanjidic | perl -npe 's/[-\w.{}]//g; s/\s+/ /g'
            echo
        fi
    done
