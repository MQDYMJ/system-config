#!/bin/bash

if test "${THE_FIREFOX}"; then
    the_firefox=${THE_FIREFOX}
elif test -e ~/external/the-firefox; then
    the_firefox=$(readlink -f ~/external/the-firefox)
elif test -e ~/external/firefox/firefox; then
    the_firefox=~/external/firefox/firefox
elif test -e ~/system-config/bin/the-firefox; then
    the_firefox=$(readlink -f ~/system-config/bin/the-firefox)
elif test -x /usr/bin/firefox; then
    the_firefox=/usr/bin/firefox
else
    bhj-notify "Error" "Firefox not found, please install it first!"
    exit 1
fi

if test $# = 1 && test "$1" = -h -o "$1" = --help; then
    true
else
    find-or-exec -p "${the_firefox}" firefox true
fi
exec $the_firefox ${FIREFOX_PROFILE_ARG} "$@"
