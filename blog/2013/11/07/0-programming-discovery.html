<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>发现式编程</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Bao Haojun" />
<link rel="stylesheet" href="/css/default.css" type="text/css" />
<link rel="stylesheet" href="/css/pink-bliss.css" type="text/css" />
 <link rel="shortcut icon" href="/poison.png" type="image/png" />

    <script type="text/javascript" src="/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        var BYB = {};
    </script>
    <script type="text/javascript">
        BYB.includeScript = function(file,callback){
            var _doc = document.getElementsByTagName('head')[0];
            var js = document.createElement('script');
            js.setAttribute('type', 'text/javascript');
            js.setAttribute('src', file);
            _doc.appendChild(js);

            if (!/*@cc_on!@*/0) { //if not IE
                //Firefox2、Firefox3、Safari3.1+、Opera9.6+ support js.onload
                js.onload = function () {
                    callback();
                }
            } else {
                //IE6、IE7 support js.onreadystatechange
                js.onreadystatechange = function () {
                    if (js.readyState == 'loaded' || js.readyState == 'complete') {
                        callback();
                    }
                }
            }
            return false;
        }
    </script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<div id="header">

  <h1 id="blog-title">

    包昊军的博客

  </h1>
  <p id="description">What you don't know, won't hurt you.</p>

</div>
</div>
<div id='bhj_article'>
  <div id='bhj_leftpane'>
<div id="content">
<h1 class="title">发现式编程</h1>
<p>
发现式编程，起这么大的一个题目你可以理解为我的一种发散性思维。其实我想
说的只是一种编程工具。
</p>

<p>
不访把时钟往回拨得远一点，我还在上大学的时候，大家都在学MFC编程，我不知
道别人是怎么学的，我的方法是把MSDN打开，一页一页的去看。后来开始学
Linux编程，同宿舍的兄弟（大龙）告诉我，学好Linux就是要把Man手册一页一页
的看，info手册一册一册的看。好吧，我的确按他说的那样做了，并且我认为这
个绝对是有必要的，没有这样做过的人几乎不可能成为编程高手，应该赶紧打开
man/info手册，吃饭也看，拉屎也看。很有趣的一点是看MSDN可能看十年也不可
能成为MFC/Windows编程的高手，看Man/Info手册的话，半年应该足够让你成为一
个Linux系统管理员了，然后会开始写一些脚本，然后会明白哇靠这不也是一种编
程吗！实战非常重要，所以Linux更适合初学编程，因为他能提供各种各样的实战
机会，各种脚本是最方便入门的。曾经我认为我要成为一个黑客的最快的方法是
学会ed命令的用法，然后看了好久的 <code>man ed</code> ，看完了忘，忘了再看，至少有
一年以上我会时不时的打开ed手册来看一看，年轻真好啊，有大把的时间可以浪
费，完全不需要去动脑子:-)
</p>

<p>
但总有一天，你看得应该够了，不需要再一页一页的去看这些手册了，这时候你
要开始大规模的编程了，你会发现你还是时不时的需要回去翻手册页。很久以前，
我为可以在VC6里把光标放在 <code>printf</code> 上按F1可以直接跳到MSDN里printf的帮助
页面而欢呼雀跃。毫无疑问，这是一个非常有用的功能，尤其是在阅读（别人写
的）源代码的时候非常有用，看到一个不熟悉的函数可以直接跳过去看一下帮助
（如果能精确的跳回来就更好了）。
</p>

<p>
但是，这不是我要讲的发现。在写代码的时候，这个功能就不是那么有用了——一
个你不熟悉的函数，你可能还不能清楚地回忆起它的名字，比如snprintf系列的
函数，它的家族里还有一个vsnprintf，这种名字真的不好记，你第一次用的话怎
么把它打出来还存在困难呢，上哪儿去按F1查它的定义去啊？
</p>

<p>
这时候就要讲到这篇文章的题目了，发现式编程，意思是你应该有一种非常好的
方法让你可以 <b>发现</b> 系统里都有什么函数，然后你可以灵活方便的选择你所需
要的函数。就像搭积木一样，同样有一百块积木，一种情况是把一百块积木一下
子全堆在你面前，随便你怎么发挥，想必你胡乱就能搭出一个挺像那么回事儿的
东西；一种是把一百块积木全部藏起来，不让你一下子全看见随便挑，非得让你
一样一样的问：“有没有三角形的？”“有没有大一点的三角形的？”你乐意用哪种
呢？
</p>

<p>
私以为，用第二种不仅更费劲，而且会影响我的想象力。
</p>

<p>
这就是为什么我喜欢用Emacs编程，为什么我喜欢用Perl，Python等语言，以及一
位大师曾经说过，C语言我每天可以用到它95%的特性，C++可能我一辈子也用不到
那么多。让我来告诉你Emacs的最爽的地方吧，它能让你发现式的编程，你系统里
的每一个Emacs-Lisp函数，只要你打C-h f，它会全部给你列出来，然后你可以在
里面过滤出你想要的。Linux呢，你系统里的每一个可执行的命令，你都可以写一
小段脚本把它列出来，然后对它进行过滤。你系统里的所有man手册。Perl的
perldoc，里面所有的perl函数，perl模块。Python/Java等的Reflect机制，给定
一个python的模块、类、对象，你可以用dir()函数知道它有什么成员。所有以上
这些，都让你能够很轻易地“发现”，有了这个更容易发现的可能性之后，你不再
会抱怨：“啊为什么我没有早一点发现这个”然后感慨相见恨晚——这种抱怨大概是
因为你使用的系统不支持这种容易发现的特性。
</p>

<p>
ESR的Unix编程艺术里有一些让我觉得很有道理的编程哲学，比如，要多用纯文本，
不要上来就自己咔咔定义二进制数据格式，为什么？因为纯文本人更容易发现，
用肉眼看，用grep搜。比如，在早期的时候，可以用文件系统来实现数据库，为
什么，原因之一还是因为这样的数据库更容易“发现”，用ls/find等Unix系统原始
命令可以查询，用rm/touch可以删除/创建数据，用git/svn可以把数据库版本管
理起来！
</p>

<p>
最后要切入到我想说的主题了，Java编程和C#编程。最近在C#上的一个小实验让
我决定动手写这篇博客。众所周知，Java编程基本上是神器的天下，Eclipse有人
说它是神器，Idea有人说它是神器。这些神器，拿到一个Jar包，然后就去“发现”里
面有什么package啊，有什么类啊，每个类有什么成员变量、成员方法啊。然后给
你补齐。这个我在我的Ajoke里已经都实现了，呵呵。
</p>

<p>
下面要告诉大家的是，给我一个C#写的dll/exe，我可以一样地发现它有什么类啊，
有什么成员方法啊，这个其实是Mono项目的monodis命令提供了，然后我用脚本封
装了一下，把monodis的输出放到GNU Global的数据库里，这样在Emacs里就可以
用tags工具去查询了，所有System命名空间里有什么玩意儿都可以搜索哦！
</p>

<p>
比如下面这个图，我在查C#里它应该不会没有判断文件存不存在的函数吧，然后
我试了一下Exists这个名字，一下就搜出来勒这个System.IO.File.Exists：
</p>


<div class="figure">
<p><a href="../../../../images/find-exists.png"><img src="../../../../images/find-exists.png" alt="find-exists.png" /></a>
</p>
</div>

<p>
我自认为这个功能可能是Eclipse、Idea等神器不具备的，“发现”。如果我自己知
道了System.IO.File的话，还需要你来告诉我它有一个叫Exists的方法啊？在我
什么都不知道的情况下，瞎猜一个Exists，然后把我真的想要的整个找到，这，
才叫“发现”（不好意思，接触C#编程只有Beagrep这个项目，所以连
System.IO.File这么常用的类都真的不知道啦，不骗你）。
</p>

<p>
神器们的功能，我也能很轻易地做到，比如我打了System.IO.File.之后，想要补
齐的话，我就搜一下这个，然后就知道可以在后面补比如 GetAccessControl ：
</p>


<div class="figure">
<p><a href="../../../../images/find-system-io-file.png"><img src="../../../../images/find-system-io-file.png" alt="find-system-io-file.png" /></a>
</p>
</div>

<p>
我已经为我的发现式的C#的Emacs编程工具想好了名字，ACoke，英文含义很丰富
哟嘻~ 接下来就看哪天有那个闲功夫把它做出来，耶！
</p>

<p>
（由于我们之前一页一页的看过MSDN、Man手册，Info手册，有了一定的词汇量的
积累，现在应该到了不怎么需要再看printf、Exists、GetAccessControl帮助的
时候了，有时候知道这个名字，大概就知道它是干什么的了；知道 <b>有</b> 这个名
字，大概就知道我们能干什么了，否则就得开动编程马达，自己去造轮子:-)）
</p>

<p>
（编程，有时候就是我猜我猜我猜猜猜，我猜系统应该提供 <code>.*exist.*</code> 函数来
让我判断文件是否存在，然后去 <b>发现</b> 这个函数真正的名字，发现过一次以后，
如果一段时间内你不停地用到这个函数，你不需要每次都发现，因为你的短期记
忆应该不会那么烂吧:-) 如果你很长时间又不用这个函数了，那你可以把它安全
地忘记，放空自己的脑袋去想一些更重要的事，比如晚饭应该吃什么——因为你已
经知道了下回怎么去再 <b>发现</b> 一次:-)）
</p>

<p>
（为什么我说一页一页的看这些手册是有必要的，虽然这看上去很傻。看，是为
了有一天你可以不用再看。因为看得多了熟了之后，你可以猜（猜完了之后可以
发现）。如果猜错的话怎么办？好吧，那就是“惊喜”了。Ruby作者Matz说过，
Ruby设计的原则之一是要减少“惊喜”（surprise，惊呆了:-)），这种惊喜不是说
让一个学C++/Perl的程序员在学Ruby的时候可以减少惊喜，而是说把Ruby学得比
较熟了之后，再用新的功能，不熟悉的功能，可以发现跟以前学了的Ruby是很和
谐的，甚至可以本能的猜出来，而不会感到不必要的“惊喜”。Matz说，他以前学
C++，学得不可谓不滚瓜烂熟了，却还是时不时地会感到惊喜。也就是本能地猜了
一下，结果发现猜错，这是让人很挫折的，尤其是如果造成一个很难发现的bug的
话:-(）
</p>

<p>
发现，搜索，探索，问题，答案，你，发现了吗？
</p>
<nav>
  <ul id="prev_next_posts">
    <li class="prev_post">
      <a href="../../10/16/0-Interactive-Git-Add.html"> <!-- prev-url -->
        <i class="icon-chevron-left">《</i>
        Interactive Git Add <!-- prev-title -->
      </a>
    </li>
    <li class="next_post" style="text-align: right;">
      <a href="../../12/11/0-ssh-remote-command-and-bash--c-string.html"> <!-- next-url -->
        ssh执行远程命令和bash -c string的用法 <!-- next-title -->
        <i class="icon-chevron-right">》</i>
      </a>
    </li>
  </ul>
</nav>
</div>
<!-- {%html-mode%} -->

<div id="disqus_container">
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: THIS CODE IS ONLY AN EXAMPLE * * */
    var disqus_shortname = 'baohaojun'; // Required - Replace example with your forum shortname
    var disqus_url = 'http://baohaojun.github.io/blog/2013/11/07/0-programming-discovery.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
    <div style="margin-bottom:20px">
    <script type="text/javascript" charset="utf-8">
      (function(){
      var _w = 86 , _h = 16;
      var param = {
      url:location.href,
      type:'6',
      count:'', /**是否显示分享数，1显示(可选)*/
      appkey:'', /**您申请的应用appkey,显示分享来源(可选)*/
      title:'', /**分享的文字内容(可选，默认为所在页面的title)*/
      pic:'', /**分享图片的路径(可选)*/
      ralateUid:'1611427581', /**关联用户的UID，分享微博会@该用户(可选)*/
      language:'zh_cn', /**设置语言，zh_cn|zh_tw(可选)*/
      rnd:new Date().valueOf()
      }
      var temp = [];
      for( var p in param ){
      temp.push(p + '=' + encodeURIComponent( param[p] || '' ) )
      }
      document.write('<iframe allowTransparency="true" frameborder="0" scrolling="no" src="http://hits.sinajs.cn/A1/weiboshare.html?' + temp.join('&') + '" width="'+ _w+'" height="'+_h+'"></iframe>')
      })()
    </script>
  </div>
  <div id="disqus_thread"></div>
</div>

</div> <!-- bhj_leftpane -->
<div id="sidebar"><div id="sidebar2">


  <!-- Begin #profile-container -->

   <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="/images/bhj.png""><img src="/images/bhj-thumb.png" alt="My Photo" height="58" width="80"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://www.github.com/baohaojun"> Bao Haojun </a></dd>
<dd class="profile-data"><strong>Location:</strong>  Beijing, China </dd></dl>

<p class="profile-link"><a rel="author" href="/blog/2011/12/23/index.html">View my complete profile</a></p></div>

  <!-- End #profile -->



  <h2 class="sidebar-title">Feeds</h2>
    <ul>
        <li><a href="/atom.xml">Atom</a></li>
    </ul>

  <h2 class="sidebar-title">Projects</h2>
    <dl>
        <dt><a href="/blog/2011/12/23/beagrep.html"> Beagrep </a></dt>
        <dd> Grep 2G source code in 0.23 second </dd>

        <dt><a href="/blog/2013/04/13/skeleton-complete.html"> Skeletom-complete.el </a></dt>
        <dd> Type a bare skeleton, complete to a symbol/partial line/sexp/paragraph </dd>

        <dt><a href="/blog/2011/12/28/org-jira.html"> Org-jira.el </a></dt>
        <dd> Use JIRA with org-mode </dd>
    </dl>

    <h2>Tags</h2>
    <ul>
                <li><a href="../../../../meta/tags/programming.html" title="General programming">programming</a></li>
    </ul>

  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
        <li><a href='../../10/16/0-Interactive-Git-Add.html'> Interactive Git Add </a></li>
<li><a href='../../10/05/0-My-Own-Win32-Input-Method.html'> 自己写了一个输入法, Windows下的五笔 </a></li>
<li><a href='../../10/04/0-Win32-IME-Programming.html'> 我的Win32输入法编程心得 </a></li>
<li><a href='../../10/01/0-Inside-Ajoke.html'> Inside Ajoke </a></li>
<li><a href='../../09/02/0-jira-5.2-essentials-review.html'> Book Review: JIRA 5.2 Essentials </a></li>
<li><a href='../../08/16/0-rbtree.html'> 红黑树 </a></li>
<li><a href='../../07/20/0-grep-cross-ref.html'> Grepping Cross References </a></li>
<li><a href='../../07/16/0-find-scroll-lock.html'> 找回失去的Scroll Lock——系统View Mode </a></li>
<li><a href='../../07/11/0-firefox-search-for-tab.html'> Firefox: Better Tab Reuse for IDE Help Integration </a></li>
<li><a href='../../07/09/0-sawfish-keyboard-macro.html'> Simple scripts to record/play keyboard macro (sawf... </a></li>
    </ul>

    <h2 class="sidebar-title">Archive</h2>
      <ul id="archives">
        <li><a href="/meta/Archive.html"> The complete archive </a></li>
      </ul>

  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->



</div></div>
<!-- End #sidebar -->
</div> <!-- End #bhj_article -->
<!-- {%/html-mode%} -->
<div id="postamble" class="status">
<!-- {%html-mode%} -->

<!-- {%/html-mode%} -->
</div>
</body>
</html>
