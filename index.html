<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<title>小扳手使用手册</title>
<meta  http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta  name="generator" content="Org-mode" />
<meta  name="author" content="Bao Haojun" />
<link rel="stylesheet" href="/css/default.css" type="text/css" />
 <link rel="stylesheet" href="/css/light-blue.css" type="text/css" />
 <link rel="shortcut icon" href="/poison.png" type="image/png" />

    <script type="text/javascript" src="/js/jquery-1.7.1.min.js"></script>
    <script type="text/javascript">
        var BYB = {};
    </script>
    <script type="text/javascript">
        BYB.includeScript = function(file,callback){
            var _doc = document.getElementsByTagName('head')[0];
            var js = document.createElement('script');
            js.setAttribute('type', 'text/javascript');
            js.setAttribute('src', file);
            _doc.appendChild(js);

            if (!/*@cc_on!@*/0) { //if not IE
                //Firefox2、Firefox3、Safari3.1+、Opera9.6+ support js.onload
                js.onload = function () {
                    callback();
                }
            } else {
                //IE6、IE7 support js.onreadystatechange
                js.onreadystatechange = function () {
                    if (js.readyState == 'loaded' || js.readyState == 'complete') {
                        callback();
                    }
                }
            }
            return false;
        }
    </script>
<script type="text/javascript">
/*
@licstart  The following is the entire license notice for the
JavaScript code in this tag.

Copyright (C) 2012-2013 Free Software Foundation, Inc.

The JavaScript code in this tag is free software: you can
redistribute it and/or modify it under the terms of the GNU
General Public License (GNU GPL) as published by the Free Software
Foundation, either version 3 of the License, or (at your option)
any later version.  The code is distributed WITHOUT ANY WARRANTY;
without even the implied warranty of MERCHANTABILITY or FITNESS
FOR A PARTICULAR PURPOSE.  See the GNU GPL for more details.

As additional permission under GNU GPL version 3 section 7, you
may distribute non-source (e.g., minimized or compacted) forms of
that code without the copy of the GNU GPL normally required by
section 4, provided you include this license notice and a URL
through which recipients can access the Corresponding Source.


@licend  The above is the entire license notice
for the JavaScript code in this tag.
*/
<!--/*--><![CDATA[/*><!--*/
 function CodeHighlightOn(elem, id)
 {
   var target = document.getElementById(id);
   if(null != target) {
     elem.cacheClassElem = elem.className;
     elem.cacheClassTarget = target.className;
     target.className = "code-highlighted";
     elem.className   = "code-highlighted";
   }
 }
 function CodeHighlightOff(elem, id)
 {
   var target = document.getElementById(id);
   if(elem.cacheClassElem)
     elem.className = elem.cacheClassElem;
   if(elem.cacheClassTarget)
     target.className = elem.cacheClassTarget;
 }
/*]]>*///-->
</script>
</head>
<body>
<div id="preamble" class="status">
<div id="header">

  <h1 id="blog-title">

    <a href="http://baohaojun.github.io/blog/2011/12/23/index.html">包昊军的博客</a>

  </h1>
  <p id="description">What you don't know, won't hurt you.</p>

</div>
</div>
<div id='bhj_article'>
  <div id='bhj_leftpane'>
<div id="content">
<h1 class="title">小扳手使用手册</h1>
<div id="outline-container-sec-1" class="outline-2">
<h2 id="sec-1"><span class="section-number-2">1</span> 小扳手介绍</h2>
<div class="outline-text-2" id="text-1">
<p>
小扳手是一款开源软件，它让你可以通过 PC 连接、操作你的安卓手机，某种程度上，小扳手能把手机上安装的 QQ、微信等 App，变成比 Windows 下的 QQ 还方便的聊天软件。
</p>

<p>
这里有一个小扳手的操作演示视频，看完后你会对小扳手有个更直观的了解：
</p>

<iframe width="640" height="360" src="https://www.youtube.com/embed/d9_5RMgUnXc" frameborder="0" allowfullscreen></iframe>

<p>
如果你不能访问 Youtube，我在腾迅视频也上传了一份，但是分辨率被压缩到了 480p<img class='emoji' src='blog/2017/07/01/emojis/smiley_27.png' style='width: 1.3em; vertical-align: -0.35em;' />，但将就还能看一下（至少比优酷强<img class='emoji' src='blog/2017/07/01/emojis/smiley_31.png' style='width: 1.3em; vertical-align: -0.35em;' />）：
</p>

<p>
<a href="https://v.qq.com/x/page/h0519beib91.html">https://v.qq.com/x/page/h0519beib91.html</a>
</p>
</div>
</div>

<div id="outline-container-sec-2" class="outline-2">
<h2 id="sec-2"><span class="section-number-2">2</span> 小扳手使用手册</h2>
<div class="outline-text-2" id="text-2">
<p>
小扳手的第一次使用需要做一些连接、配置操作，参考后面的 <a href="#wrench-connection">小扳手的连接、配置</a>。配好之后，就可以正常使用小扳手的各种功能了。
</p>

<p>
这是小扳手的界面，下面会结合这个界面大致介绍一下小扳手的功能点：
</p>


<div class="figure">
<p><a href="images/wrench-main-windows.png"><img src="images/wrench-main-windows.png" alt="wrench-main-windows.png" /></a>
</p>
</div>

<p>
这是手机上收到新的通知（比如 QQ、微信等的聊天消息）时，小扳手在 PC 上弹出的桌面通知：
</p>


<div class="figure">
<p><a href="images/Wrench-qq-notification.png"><img src="images/Wrench-qq-notification.png" alt="Wrench-qq-notification.png" /></a>
</p>
</div>

<dl class="org-dl">
<dt> 文字输入区<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_ONE+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>在这里输入、编辑想通过手机发送的文字

<p>
另外，这里也能显示通过表情符选择输入对话框输入的表情符（emoji）。
</p>

<p>
如果把图片（本地的、浏览器的图都可以）拖拽到这个区域再放开的话，相当于通过图片选择按钮<img class='emoji' src='blog/2017/07/01/emojis/picture.png' style='width: 1.3em; vertical-align: -0.35em;' />选定了相应的图片。
</p>
</dd>

<dt> 发送按钮<img class='emoji' src='blog/2017/07/01/emojis/smartisan.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>按此按钮把<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_ONE+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' />中输入的文字发送到手机上，并且：
<ul class="org-ul">
<li>如果你有打开社交网络分享开关，则把文字、图片分享到所选中的社交网络（可多选）

<p>
社交网络开关按扭包括：
</p>
<ul class="org-ul">
<li>微博<img class='emoji' src='blog/2017/07/01/emojis/com_sina_weibo_icon.png' style='width: 1.3em; vertical-align: -0.35em;' />
</li>
<li>微信朋友圈<img class='emoji' src='blog/2017/07/01/emojis/com_tencent_mm_icon.png' style='width: 1.3em; vertical-align: -0.35em;' />
</li>
<li>QQ 空间<img class='emoji' src='blog/2017/07/01/emojis/qq.png' style='width: 1.3em; vertical-align: -0.35em;' />
</li>
</ul>
</li>

<li>否则，如果小扳手认为当前手机窗口是聊天窗口，自动点击手机上的发送按钮
</li>
<li>如果小扳手认为当前手机窗口输入文字后不需要自动操作，则小扳手什么也不做，如有后续操作，用户需要自己手动执行
</li>
<li>如果小扳手不认识当前手机窗口，这是安装后第一次用小扳手操作该 App 窗口，则小扳手会弹窗问你该窗口类型，下次再碰到此窗口按照你选的类型操作此窗口：


<div class="figure">
<p><a href="images/wrench-window-types.png"><img src="images/wrench-window-types.png" alt="wrench-window-types.png" /></a>
</p>
</div>

<p>
（以后你还会多次见到这个小扳手的选择输入界面，后面会做一下详细介绍）
</p>
</li>
</ul>
</dd>

<dt> PC 桌面通知窗口 </dt><dd>弹出此通知时，点击此窗口（或按快捷键 Ctrl+F6），会在手机上点开对应的通知消息（比如如果是微信聊天消息，则会直接打开手机微信相应的聊天窗口）。

<p>
如果没有及时点这个窗口，可以按<img class='emoji' src='blog/2017/07/01/emojis/BELL.png' style='width: 1.3em; vertical-align: -0.35em;' />按钮或者再按 Ctrl-F6 显示所有历史消息。
</p>
</dd>
<dt> 表情符按钮<img class='emoji' src='blog/2017/07/01/emojis/emoji.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>按此按钮可以输入表情符，输入的表情符在<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_ONE+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' />中与文字一起显示、发送

<p>
注意小扳手支持 4 类表情符：
</p>

<ol class="org-ol">
<li>所有 unicode 表情符
</li>
<li>QQ 表情符
</li>
<li>微信表情符（大部分与 QQ 表情相同，少部分不同）
</li>
<li>微博表情符（少部分与 QQ 表情相同，大部分不同）
</li>
</ol>
<p>
在使用表情符的时候，需要自己注意区分，比如不要在微博 App 里使用 QQ 表情符（除非你想制造特殊的表情效果）
</p>
</dd>

<dt> 选择图片按钮<img class='emoji' src='blog/2017/07/01/emojis/picture.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>按此按钮选择图片，然后允许你：
<ul class="org-ul">
<li>通过手机当前聊天窗口发送
</li>
<li>分享到微博、微信朋友圈、QQ 空间（需提前选中相应社交网络按钮）
</li>
</ul>
</dd>

<dt> 截屏按钮<img class='emoji' src='blog/2017/07/01/emojis/capture-screen.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>此功能目前被禁用，因为原来的代码是不开源的
</dd>

<dt> 微博开关<img class='emoji' src='blog/2017/07/01/emojis/com_sina_weibo_icon.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>这个按钮有 3 个功能，前提是必须使用微博官方客户端
<ol class="org-ol">
<li>短按是一个乒乓开关，打开后点击发送按钮<img class='emoji' src='blog/2017/07/01/emojis/smartisan.png' style='width: 1.3em; vertical-align: -0.35em;' />会把图文分享到微博
</li>
<li>长按会弹出一个输入选择对话框，允许你进行一些简单的微博搜索
</li>
<li>把浏览器上的微博链接拖拽到此按钮上放开，会直接用手机的微博客户端打开此微博

<p>
该功能用来查看微博问答特别方便，在视频中有演示
</p>
</li>
</ol>
</dd>

<dt> 微信开关<img class='emoji' src='blog/2017/07/01/emojis/com_tencent_mm_icon.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>这个按钮有 3 个功能，前两与微博按钮的前两个功能类似，分别是分享到微信朋友圈和搜索微信联系人。
第 3 个功能是把图片拖到此按钮上放开后，允许你选择输入是发送给某个联系人的名字，还是分享到微信朋友圈。
</dd>

<dt> QQ 开关<img class='emoji' src='blog/2017/07/01/emojis/qq.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>这个按钮功功能与微信按钮类似，分别是分享到 QQ 空间（需安装 QQ 空间）、 搜索 QQ 联系人（需安装 QQ 官方客户端，无法使用国际版、轻聊版），以及拖拽图片到此按钮以发给好友或分享到 QQ 空间。
</dd>

<dt> 屏幕同步开关<img class='emoji' src='blog/2017/07/01/emojis/phone-screen.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>这个按钮允许打开、关闭手机屏幕同步到 PC 上显示，见窗口<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_TWO+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' />
</dd>

<dt> 手机拨号按钮<img class='emoji' src='blog/2017/07/01/emojis/phone-call.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>这个按钮会弹出一个选择输入框，允许你选择电话联系人并呼出电话。
<dl class="org-dl">
<dt> 注意 </dt><dd>为方便选择联系人，需要你先把手机联系人输出成一个名为 contacts.vcf 的文件，然后放在 <code>~/.android</code> 目录下。否则只能自己手动输入电话号码。
</dd>
</dl>
</dd>

<dt> 短信按钮<img class='emoji' src='blog/2017/07/01/emojis/mms.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>很久没有维护，几乎不能用了，现在也没什么人经常发短信了吧<img class='emoji' src='blog/2017/07/01/emojis/QQ-XIAOJIUJIE.PNG' style='width: 1.3em; vertical-align: -0.35em;' />。
</dd>

<dt> 手机应用按钮<img class='emoji' src='blog/2017/07/01/emojis/MOBILE_PHONE.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>会弹出一个选择输入框，让你从 PC 端启动手机上的 App。
</dd>
<dt> 顶赞按钮<img class='emoji' src='blog/2017/07/01/emojis/thumbs_up.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>小扳手开发早期的时候，按这个按钮会自动打开你的微博，然后关注我的微博账号，然后转发我关于小扳手的一条微博<img class='emoji' src='blog/2017/07/01/emojis/smiley_44.png' style='width: 1.3em; vertical-align: -0.35em;' />，现在已经改成别的功能了。

<p>
现在这个按钮会弹出一个选择对话框，里面有许多小扳手的扩展功能，比如（后续版本可能会继续增加，用户也可以自己通过手机操作录制功能增加）：
</p>

<ul class="org-ul">
<li>给作者打钱以表支持
</li>
<li>让小扳手进入、退出调试模式（打更多 log）
</li>
<li>各种搜索功能（搜微信联系人、QQ 联系人、QQ 群里的用户、微博用户、邮件（按发信人搜）等等）
</li>
<li>更新 App 列表
</li>
<li>在 Kindle 书店里搜索你想要找的书
</li>
<li>在 QQ、微信等聊天时想@一下某人
</li>
<li>在微博上关注小扳手作者包昊军（不一定成功）
</li>
<li>重置手机 VNC 连接模式（演示、竖屏高清、横屏高清）
</li>
<li>打开 Bilibili 客户端扫描二维码功能
</li>
<li>打开 QQ App 并扫描
</li>
<li>打开京东 App 扫描二维码
</li>
<li>打开通知授权设置页，再手动（可能要多次尝试）打开、关闭小扳手接收通知权限
</li>
<li>打开微信扫描
</li>
<li>打开微博扫码功能
</li>
<li>通过微博、微信朋友圈传播小扳手（不一定成功）
</li>
<li>把拖进来的文字保存到我的 GTD 列表里面
</li>
<li>用手机微博 App 打开微博网页
</li>
</ul>
<p>
其中，前面提到的微博按钮的第 3 个功能就是通过调用“用手机微博 App 打开微博网页”这个扩展功能实现的。
</p>
</dd>

<dt> 设置按钮<img class='emoji' src='blog/2017/07/01/emojis/config.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>主要用于
<ol class="org-ol">
<li>新增扩展、改动之后，点一下这个按钮就可以让小扳手使用新的配置
</li>
<li>小扳手出错的话可能需要点此按钮恢复
</li>
</ol>
</dd>

<dt> 状态按钮<img class='emoji' src='blog/2017/07/01/emojis/red.png' style='width: 1.3em; vertical-align: -0.35em;' /><img class='emoji' src='blog/2017/07/01/emojis/BELL_WITH_CANCELLATION_STROKE.png' style='width: 1.3em; vertical-align: -0.35em;' /><img class='emoji' src='blog/2017/07/01/emojis/BELL.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>显示小扳手连接状态，参考 <a href="#wrench-connection-status">三种状态按钮的说明</a>。
</dd>

<dt> 手机屏幕同步窗口<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_TWO+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>手机屏幕同步，在此窗口内可以对手机进行简单的操作，以及一些更高级的功能。在此窗口内：

<dl class="org-dl">
<dt> 滚动鼠标滚轮 </dt><dd>相当于手机屏幕上的上下滑动
</dd>
<dt> 点鼠标左键 </dt><dd>相当于手机上相应位置的触摸操作
</dd>
<dt> 按 Home 键 </dt><dd>相当于在手机上按 Home 键
</dd>
<dt> 按 Escape 键 </dt><dd>相当于在手机上按 Back 键
</dd>
<dt> 按 F12 键 </dt><dd>会弹出输入选择框，允许改变手机同步模式
</dd>
<dt> 上下左右方向键 </dt><dd>需要看一下相关 wrench.lua 代码，作者自己用这些键在高清屏幕同步阅读电子书时翻页
</dd>
</dl>
</dd>

<dt> Log 输出窗口<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_THREE+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>小扳手运行过程中输出一些 Log。如果给我报 Bug 的话，要记得把这些 Log 发过来（参考 <a href="#bugs-howto">4.5</a>）。
</dd>

<dt> 发送邮件页面<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_FOUR+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>必须配合锤子科技手机使用，很久没有用了，不展开讲了。
</dd>
</dl>
</div>


<div id="outline-container-sec-2-1" class="outline-3">
<h3 id="sec-2-1"><span class="section-number-3">2.1</span> 输入选择对话框</h3>
<div class="outline-text-3" id="text-2-1">
<p>
除了上面这个主窗口的功能点之外，还有这样的一种对话框：
</p>


<div class="figure">
<p><a href="images/wrench-emoji-input.png"><img src="images/wrench-emoji-input.png" alt="wrench-emoji-input.png" /></a>
</p>
</div>

<p>
我把它称为“选择输入对话框”。小扳手里多处使用了这种名字有点特别的对话框（因为是我自己取的名字），它像浏览器的地址栏一样，既允许你输入一个网址，也允许你输入一些文本片断，然后从你的书签、浏览历史里找到匹配的选项。
</p>

<p>
使用这种对话框，你可以在<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_FIVE+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' />编辑窗口输入文字、与<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_SIX+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' />列表窗口中现有的选项进行匹配，然后：
</p>
<ol class="org-ol">
<li>如果有匹配的选项，双击该选项或回车后输入结果是被选中的匹配选项
</li>
<li>如果没有匹配的选项，回车后输入结果是用户输入的文本
</li>
<li>如果有匹配选项，但用户按下 Ctrl-Enter，输入结果强制返回用户输入的文本
</li>
<li>如果有多个匹配选项，按下“Shift-Enter”，结果相当于输入每一个匹配的选项——可以用这个方法一次性输入多个表情。
</li>
<li>根据该对话框使用场景类型，返回结果后，一次性的对话框会退出，可重复使用的对话框如表情符输入框不会退出，这样用户可以输入多个表情符，最后想退出时需要按两次 Escape 键（也可以按 Alt-F4，如果你的 PC 操作系统支持的话。需要按两次 Escape 的原因参考 <a href="#hotkeys">2.3</a>）。
</li>
</ol>



<p>
把这种对话框用到表情符的输入之后，你可以通过表情的意思，输入与其对应的一个文字片断，比如“xiao”，来搜索过滤出所有与“笑”有关的表情，然后再快速的选择、输入，而不是在满满好几屏的表情符里找来找去。
</p>
</div>
</div>

<div id="outline-container-sec-2-2" class="outline-3">
<h3 id="sec-2-2"><span class="section-number-3">2.2</span> 屏幕同步窗口的录屏操作</h3>
<div class="outline-text-3" id="text-2-2">
<ol class="org-ol">
<li>在屏幕同步窗口<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_TWO+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' />中，按一次鼠标右键开始录屏、再按一次结束录屏 
</li>

<li>在录屏开始时，小扳手会问你本次功能要保存的文件名、功能简单描述 
</li>

<li>录屏过程中，对<img class='emoji' src='blog/2017/07/01/emojis/DIGIT_TWO+COMBINING_ENCLOSING_KEYCAP.png' style='width: 1.3em; vertical-align: -0.35em;' />窗口每按一次鼠标左键，都会问你本次操作的目的 
</li>

<li>结束录制的时候，小扳手会提示你最终录制的脚本存放的绝对路径，你可以打开编辑，把脚本的逻辑改得更健壮，比如加入出错处理，等等。
</li>
</ol>

<p>
录制过程中你手工输入的信息，会在后续修改脚本的时候提供很多帮助，而不用苦苦思索在这个座标点一下是想干什么<img class='emoji' src='blog/2017/07/01/emojis/SMILING_FACE_WITH_OPEN_MOUTH_AND_COLD_SWEAT.png' style='width: 1.3em; vertical-align: -0.35em;' />。
</p>
</div>
</div>

<div id="outline-container-sec-2-3" class="outline-3">
<h3 id="sec-2-3"><span class="section-number-3">2.3</span> <a id="hotkeys" name="hotkeys"></a> 快捷键</h3>
<div class="outline-text-3" id="text-2-3">
<p>
小扳手的所有文字输入窗口，都参考了一些 Emacs 的文字输入快捷键，比如 C-b 是后退一个字符，C-f 是向前一个字符等等，具体需要参考一下源代码（见 <a href="http://github.com/SmartisanTech/Wrench/raw/master/wrenchmainwindow.cpp">这个.cpp 文件</a> 中的 handleEmacsKeys 函数）。
</p>

<p>
其中 Emacs 下很多 Alt 相关的快捷键也可以使用 Escape，比如 Alt-b，按下 Alt 不放开，再按下 b，功能是后退一个单词，也可以等价的使用 Esc b（按下 Escape，放开，再按下 b）。所以想退出输入选择框窗口时，必须按两次 Escape，第一次 Escape 只是一个组合快捷键的前缀。
</p>

<p>
除此之外，上面有些按钮也有快捷键：
</p>

<dl class="org-dl">
<dt> <img class='emoji' src='blog/2017/07/01/emojis/emoji.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>Alt-8
</dd>
<dt> <img class='emoji' src='blog/2017/07/01/emojis/phone-call.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>Alt-7
</dd>
<dt> <img class='emoji' src='blog/2017/07/01/emojis/smartisan.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>Ctrl-Enter
</dd>
<dt> <img class='emoji' src='blog/2017/07/01/emojis/com_sina_weibo_icon.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>Ctrl-Alt-b
</dd>
<dt> <img class='emoji' src='blog/2017/07/01/emojis/com_tencent_mm_icon.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>Ctrl-Alt-w
</dd>
<dt> <img class='emoji' src='blog/2017/07/01/emojis/qq.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>Ctrl-Alt-q
</dd>
<dt> <img class='emoji' src='blog/2017/07/01/emojis/BELL.png' style='width: 1.3em; vertical-align: -0.35em;' /> </dt><dd>Ctrl-F6
</dd>
</dl>

<p>
这是以前总结的一个小扳手 Emacs 风格快捷键清单：
</p>

<pre class="example">
    C-b: 向后移动一个字符（b for back），也可以用 Left
    C-f: 向前移动一个字符（f for forth)，也可以用 Right
    M-b: 向后移动一个单词，也可以用 C-Left
    M-f: 向前移动一个单词，也可以用 C-Right
    C-p: 向上移动一行，Up (p for prev)
    C-n: 向下移动一行，Down (n for next)
    C-a: 移动到行首，Home (a 是第一个字母）
    C-e: 移动到行末，End (e for end)
    C-d: 删除下一个字符，Delete (d for delete)
    C-v: 向下翻动一页，对不起不是大家熟悉的粘贴功能（v 看起来是向下的箭头）
    M-v: 向上翻动一页。
    M-&lt;: 移动到全文最开始，也可以用 C-Home（&lt;看起来像什么？）
    M-&gt;: 移动到全文最末尾，也可以用 C-End （&gt;看起来像什么？）
    C-y: 粘贴
    C-k: 删除本行余下的内容。(k for kill)
    M-* 或 M-8: 打开表情选择窗口（^_*）

 在表情选择窗口里，你可以输入文本进行表情过滤，比如输入“weixin xiao”，
 可以过滤出微信的 4 个笑的表情。这里也有几个快捷键可以用，这些快捷键对所有其他输入选择对话框也有效：

    C-n: 选择下一个表情
    C-p: 选择上一个表情
    Enter: 输入当前选中的表情
    Shift-Enter: 输入当前过滤出来的所有表情
</pre>
</div>
</div>
</div>


<div id="outline-container-sec-3" class="outline-2">
<h2 id="sec-3"><span class="section-number-2">3</span> <a id="wrench-connection" name="wrench-connection"></a> 小扳手的下载、安装、跟手机的连接</h2>
<div class="outline-text-2" id="text-3">
<p>
小扳手的下载地址在 <a href="https://github.com/SmartisanTech/Wrench-releases/releases">Github</a> 上，目前只提供 Windows、Mac 系统的预编译版本下载，Linux 下想使用小扳手的话，暂时只能自己编译。下载时请按自己的系统类型，并确保选最新版本。
</p>

<p>
下载下来之后，不需要安装，解压后直接双击运行即可。
</p>

<p>
运行之后，第一次用小扳手连接你的手机时，需要进行以下操作（只有第一个操作是手动，后续的是小扳手自动执行的）：
</p>

<ol class="org-ol">
<li>确保 PC 与手机之间确保 adb 连接 
</li>
<li>小扳手检测到 adb 手机设备后，自动安装小扳手辅助 apk
</li>
<li>小扳手自动安装小扳手输入法 apk、上传屏幕同步后台程序。
</li>
<li>可以开始使用小扳手控制手机了

<p>
注：第一次把 PC 上输好的文字输到手机编辑窗口时，小扳手会提示要自动把输入法切换成“小扳手输入法”。不用担心，拔掉 USB 线后，手机会自动切换回你原来的那个输入法。
</p>
</li>
</ol>
</div>

<div id="outline-container-sec-3-1" class="outline-3">
<h3 id="sec-3-1"><span class="section-number-3">3.1</span> adb 连接问题</h3>
<div class="outline-text-3" id="text-3-1">
<p>
小扳手需要你的 PC 通过 usb 线用 adb 的方式连接到你的安卓手机，这个操作对一些以前没玩过 adb 的用户来讲可能有点难度，你可以通过搜索引擎输入 <code>你的手机型号 adb 驱动 连接</code> 等关键字搜一下相关方法。
</p>

<p>
只有 Windows 下还需要安装驱动，其他 PC 系统不用。可以考虑使用 360 手机助手帮忙安装驱动，但用完后记得一定要删掉，因为——
</p>

<p>
这里需要注意的是，小扳手自带了谷歌官方的 adb 程序，请确保你的系统里没有别的版本的 adb 程序，尤其是不能有那种不断重启的其他版本 adb 程序。如果是 Windows 系统的话，要注意各种手机助手，它们都自带 adb 功能，但版本都比较老，肯定会有兼容问题，最好把它们卸载了。在 Mac 系统下，锤子科技公司提供的 HandShaker 程序，某些较早的版本好像也自带 adb 功能，想使用小扳手的话，目前也没有好的解决办法，只能也建议卸载该软件。
</p>
</div>
</div>

<div id="outline-container-sec-3-2" class="outline-3">
<h3 id="sec-3-2"><span class="section-number-3">3.2</span> <a id="wrench-connection-status" name="wrench-connection-status"></a> adb 连上之后</h3>
<div class="outline-text-3" id="text-3-2">
<ol class="org-ol">
<li>adb 连上之前，小扳手的状态按钮是<img class='emoji' src='blog/2017/07/01/emojis/red.png' style='width: 1.3em; vertical-align: -0.35em;' />，点击会提示你尚未连到手机。
</li>

<li>手机第一次连上之后，小扳手会自动往你的手机里安装两个应用（分别是小扳手辅助 App 和小扳手输入法 App），请确保在手机上允许安装。

<p>
然后小扳手的状态按钮会变成<img class='emoji' src='blog/2017/07/01/emojis/BELL_WITH_CANCELLATION_STROKE.png' style='width: 1.3em; vertical-align: -0.35em;' />，这时候你可以正常使用小扳手的大部分功能，但是不能在 PC 上显示手机上收到的通知消息。
</p>
</li>

<li>按一下<img class='emoji' src='blog/2017/07/01/emojis/BELL_WITH_CANCELLATION_STROKE.png' style='width: 1.3em; vertical-align: -0.35em;' />按钮，小扳手会在手机上打开通知相关的设置页面，请允许小扳手 App 接收手机通知。

<p>
这个操作可能要多试几次，并且中间重新拔插手机 USB 线试一下，最后小扳手的状态图标会变成<img class='emoji' src='blog/2017/07/01/emojis/BELL.png' style='width: 1.3em; vertical-align: -0.35em;' />。
</p>
</li>

<li>小扳手状态变成<img class='emoji' src='blog/2017/07/01/emojis/BELL.png' style='width: 1.3em; vertical-align: -0.35em;' />后，就可以正常使用所有功能了，包括自动抢红包。

<p>
这时候如果手机上有未读通知，小扳手会全部接收并通过 PC 端桌面通知窗口提醒你。
</p>

<p>
此时按一下这个按钮，会用一个“选择输入对话框”显示从手机上收到的所有通知，双击某通知会在手机上处理此通知（比如打开相应的 App 或社交软件好友聊天窗口）——如果此消息尚未处理过的话。
</p>
</li>
</ol>
</div>
</div>
</div>

<div id="outline-container-sec-4" class="outline-2">
<h2 id="sec-4"><span class="section-number-2">4</span> 常见问题</h2>
<div class="outline-text-2" id="text-4">
</div><div id="outline-container-sec-4-1" class="outline-3">
<h3 id="sec-4-1"><span class="section-number-3">4.1</span> 小扳手一直显示<img class='emoji' src='blog/2017/07/01/emojis/BELL_WITH_CANCELLATION_STROKE.png' style='width: 1.3em; vertical-align: -0.35em;' /></h3>
<div class="outline-text-3" id="text-4-1">
<ol class="org-ol">
<li>小扳手的通知功能不支持 Smartisan T1，因为安卓版本有点太老了。请你看一下自己手机的 sdk 版本（<code>命令行上运行 =adb shell getprop ro.build.version.sdk</code>），最低要求是 21。
</li>

<li>试过小米 6，能显示<img class='emoji' src='blog/2017/07/01/emojis/BELL.png' style='width: 1.3em; vertical-align: -0.35em;' />，但很快又会变成<img class='emoji' src='blog/2017/07/01/emojis/BELL_WITH_CANCELLATION_STROKE.png' style='width: 1.3em; vertical-align: -0.35em;' />，看上去是后台的服务被杀死了，这个问题可能需要找小米手机的工作人员解决<img class='emoji' src='blog/2017/07/01/emojis/wx-WuLian.PNG' style='width: 1.3em; vertical-align: -0.35em;' />。
</li>
</ol>
</div>
</div>

<div id="outline-container-sec-4-2" class="outline-3">
<h3 id="sec-4-2"><span class="section-number-3">4.2</span> 小扳手一直显示<img class='emoji' src='blog/2017/07/01/emojis/red.png' style='width: 1.3em; vertical-align: -0.35em;' /></h3>
<div class="outline-text-3" id="text-4-2">
<p>
如果 adb 连接没问题的话，我曾经碰到过手机上装的小扳手辅助应用太老，然后导致一直装不上新的版本。解决方法是把辅助应用的旧版本删了。
</p>
</div>
</div>

<div id="outline-container-sec-4-3" class="outline-3">
<h3 id="sec-4-3"><span class="section-number-3">4.3</span> 小扳手一直无法使用 VNC 屏幕同步，只能截屏屏幕同步</h3>
<div class="outline-text-3" id="text-4-3">
<p>
用 VNC 屏幕同步的话，比截屏屏幕同步要流畅很多，但它跟通知机制一样，需要 sdk 版本 21 以上。
</p>

<p>
Smartisan T1 的安卓 sdk 版本是 19，因此无法使用 VNC 屏幕同步。
</p>

<p>
另外，某些机型可能存在 androidvncserver 即使 sdk 版本匹配，但也无法正常运行的情况。
</p>
</div>
</div>

<div id="outline-container-sec-4-4" class="outline-3">
<h3 id="sec-4-4"><span class="section-number-3">4.4</span> 小扳手状态已经显示<img class='emoji' src='blog/2017/07/01/emojis/BELL.png' style='width: 1.3em; vertical-align: -0.35em;' />，但收不到通知，或者收到通知点击没有反应</h3>
<div class="outline-text-3" id="text-4-4">
<p>
这种情况在锤子手机上因为有应用双开的功能，导致系统里有两路通知，一路是给正常的微信、QQ 用的，另一路是给“克隆”出来的微信、QQ 等 App 用的，小扳手有时候会搞错，但目前还查不出来什么原因。
</p>

<p>
解决的方法是重新打开、关闭一下通知机制（点<img class='emoji' src='blog/2017/07/01/emojis/thumbs_up.png' style='width: 1.3em; vertical-align: -0.35em;' />，选“switch-notification.lua”提供的功能在手机上打开通知设置界面）。
</p>
</div>
</div>


<div id="outline-container-sec-4-5" class="outline-3">
<h3 id="sec-4-5"><span class="section-number-3">4.5</span> <a id="bugs-howto" name="bugs-howto"></a> 怎么报 Bug</h3>
<div class="outline-text-3" id="text-4-5">
<p>
您可以在微博上给我私信（微博 ID：baohaojun），报 Bug 的时候注意：
</p>

<ol class="org-ol">
<li>告诉我你的手机型号、PC 系统型号（操作系统、版本）
</li>

<li>尽量描述清楚发生 Bug 时您在做什么操作
</li>

<li>如果小扳手出错时有弹出对话框的话，最好有这个对话框的清楚的截屏
</li>

<li>把小扳手下方的 Log 窗口里的文字复制、粘贴一下发给我，如果文字太多的话，截最后 20 行左右就可以了
</li>
</ol>

<nav>
  <ul id="prev_next_posts">
    <li class="prev_post">
      <a href="blog/2017/06/29/0-One-Wrench-To-Screw-Them-All.html"> <!-- prev-url -->
        <i class="icon-chevron-left">《</i>
        小扳手的野望 <!-- prev-title -->
      </a>
    </li>
    <li class="next_post" style="text-align: right;">
      <a href="meta/Archive.html"> <!-- next-url -->
        Archive <!-- next-title -->
        <i class="icon-chevron-right">》</i>
      </a>
    </li>
  </ul>
</nav>
</div>
</div>
</div>
</div>
<!-- {%html-mode%} -->

<div id="disqus_container">
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: THIS CODE IS ONLY AN EXAMPLE * * */
    var disqus_shortname = 'baohaojun'; // Required - Replace example with your forum shortname
    var disqus_url = 'http://baohaojun.github.io/blog/2017/07/01/0-Wrench-User-Manual.html';

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
  <div id="disqus_thread"></div>
</div>

</div> <!-- bhj_leftpane -->
<div id="sidebar"><div id="sidebar2">


  <!-- Begin #profile-container -->

   <div id="profile-container"><h2 class="sidebar-title">About Me</h2>
<dl class="profile-datablock"><dt class="profile-img"><a href="/images/bhj.png""><img src="/images/bhj-thumb.png" alt="My Photo" height="58" width="80"></a></dt>
<dd class="profile-data"><strong>Name:</strong> <a rel="author" href="https://www.github.com/baohaojun"> Bao Haojun </a></dd>
<dd class="profile-data"><strong>Location:</strong>  Beijing, China </dd></dl>

<p class="profile-link"><a rel="author" href="/blog/2011/12/23/index.html">View my complete profile</a></p></div>

<h2 class="sidebar-title">Like my blog?</h2>
      <a href='https://pledgie.com/campaigns/33066'><img alt='Click here to lend your support to: Well done, Mr. Bao Haojun. and make a donation at pledgie.com !' src='https://pledgie.com/campaigns/33066.png?skin_name=chrome' border='0' ></a>

  <!-- End #profile -->

  <h2 class="sidebar-title">Feeds</h2>
    <ul>
        <li><a href="/atom.xml">Atom</a></li>
    </ul>

  <h2 class="sidebar-title">Projects</h2>
    <dl>
        <dt><a href="/blog/2011/12/23/beagrep.html"> Beagrep </a></dt>
        <dd> Grep 2G source code in 0.23 second </dd>

        <dt><a href="/blog/2013/04/13/skeleton-complete.html"> Skeletom-complete.el </a></dt>
        <dd> Type a bare skeleton, complete to a symbol/partial line/sexp/paragraph </dd>

        <dt><a href="/blog/2011/12/28/org-jira.html"> Org-jira.el </a></dt>
        <dd> Use JIRA with org-mode </dd>
    </dl>

    <h2>Tags</h2>
    <ul>
                <li><a href="meta/tags/tool.html" title="Computer tools">tool</a></li>
    </ul>

  <h2 class="sidebar-title">Previous Posts</h2>
    <ul id="recently">
        <li><a href='blog/2017/06/29/0-One-Wrench-To-Screw-Them-All.html'> 小扳手的野望 </a></li>
<li><a href='blog/2017/02/16/0-wrap-lines-with-emacs.html'> 刚刚学到一招：简便 Emacs 折行 </a></li>
<li><a href='blog/2016/12/13/0-How-to-export-Chinese-with-Org-mode-Latex-backend.html'> 江湖救急：Emacs org mode 下怎么排版中文 pdf 文档 </a></li>
<li><a href='blog/2016/12/11/0-Steve-Yegge-started-blogging-again-after-4-years.html'> 偶像重出江湖了 </a></li>
<li><a href='blog/2016/12/10/1-Learning-Programming-Languages-by-Comparing.html'> 各种编程语言之间的对比学习 </a></li>
<li><a href='blog/2016/12/10/0-Please-support-me-if-you-like-my-work.html'> Please support me if you like my work </a></li>
<li><a href='blog/2016/11/12/0-Programming-by-Wishful-Thinking.html'> 编程和许愿 </a></li>
<li><a href='blog/2016/11/02/0-writing-wechat-public-messages-with-org-mode.html'> 用 org-mode 写微信公众号 </a></li>
<li><a href='blog/2016/10/30/0-Learning-Japanese-as-a-Chinese-Programmer.html'> 程序员学习日语经验分享 </a></li>
<li><a href='blog/2016/06/07/0-My-University-Entrance-Exam.html'> 二十年高考怪现象 </a></li>
    </ul>

    <h2 class="sidebar-title">Archive</h2>
      <ul id="archives">
        <li><a href="/meta/Archive.html"> The complete archive </a></li>
      </ul>

  <!--
  <p>This is a paragraph of text that could go in the sidebar.</p>
  -->



</div></div>
<!-- End #sidebar -->
</div> <!-- End #bhj_article -->
<!-- {%/html-mode%} -->
<div id="postamble" class="status">
<!-- {%html-mode%} -->

<!-- {%/html-mode%} -->
</div>
</body>
</html>
